name: Test Simple Automation

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  test-simple:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install basic dependencies
      run: |
        python -m pip install --upgrade pip
        pip install requests pillow moviepy numpy
    
    - name: Create test video
      env:
        TEST_MODE: "true"
      run: |
        python -c "
import os
from PIL import Image, ImageDraw, ImageFont
import numpy as np

# إنشاء خلفية بسيطة
img = Image.new('RGB', (1080, 1920), color='blue')
draw = ImageDraw.Draw(img)

# إضافة نص
try:
    font = ImageFont.truetype('arial.ttf', 60)
except:
    font = ImageFont.load_default()

draw.text((540, 960), 'Test Short - Working!', fill='white', font=font, anchor='mm')

# حفظ الصورة
os.makedirs('output', exist_ok=True)
img.save('output/test_short.jpg')
print('✅ Test image created successfully!')
        "
    
    - name: Upload test artifact
      uses: actions/upload-artifact@v3
      with:
        name: test-output
        path: output/
